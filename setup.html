<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Mobster</title>
    <link rel="stylesheet" href="./assets/css/bootstrap337.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="./assets/css/bootstrap-darkly-theme.min.css" crossorigin="anonymous">
    <script src="./assets/js/bootstrap337.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="./src/elm.js"></script>
    <script>window.Elm = require('./src/elm.js');</script>
    <style>
      html,body {
        -webkit-user-select: none;
        user-select: none;
        width: 100%;
        height: 100%;
        padding: 50px;
      }

      .btn:focus {
        outline: none;
      }

      .btn:active {
        outline: none;
      }

      .btn:active:focus {
        outline: none;
      }

      ul {
        list-style: none;
      }

      .top-buffer {
        margin-top: 20px;
      }

      .right-buffer {
        margin-right: 10px;
      }

      .transparent {
        opacity: .2 !important;
        background-color: rgba(150, 150, 150, 0.2);
      }
      </style>
  </head>
  <body id="setup-window">
  </body>

  <script>
    const $ = require('jquery')
    const {ipcRenderer} = require('electron');

    let settings = JSON.parse(window.localStorage.getItem('setup'))
    let setup = Elm.Setup.Main.fullscreen(settings);

    setup.ports.startTimer.subscribe(function(flags) {
      ipcRenderer.send('start-timer', flags)
    });

    setup.ports.quit.subscribe(function() {
      ipcRenderer.send('quit')
    });

    setup.ports.selectDuration.subscribe(function(id) {
      document.getElementById(id).select()
    });

    setup.ports.saveSetup.subscribe(function(setup) {
      window.localStorage.setItem('setup', JSON.stringify(setup))
    })

    $(() => {
      $('.invisible-trigger').hover(
        () => { $('body').addClass('transparent') },
        () => { $('body').removeClass('transparent') }
      )
    })

  </script>
</html>
